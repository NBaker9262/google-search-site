<!DOCTYPE html>
<html lang="en">
<head>
    <title>Search Results</title>
    <style>
        #searchFrame, #resultFrame {
            width: 100%;
            height: 400px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h2>Search Results</h2>

    <!-- Iframe for Google Search Results -->
    <iframe id="searchFrame" src="about:blank"></iframe>

    <h2>Page Preview</h2>
    <!-- Iframe for Opening Clicked Links -->
    <iframe id="resultFrame" src="about:blank"></iframe>

    <script>
        // Load Google Search results into iframe
        window.onload = function () {
            const params = new URLSearchParams(window.location.search);
            const query = params.get("q");
            if (query) {
                document.getElementById("searchFrame").src =
                    `https://cse.google.com/cse?cx=440a21345affa4c4f&q=${encodeURIComponent(query)}`;
            }
        };

        // Capture clicks in searchFrame and open them in resultFrame
        document.getElementById("searchFrame").addEventListener("load", function () {
            const searchFrame = document.getElementById("searchFrame").contentWindow.document;
            
            searchFrame.addEventListener("click", function (event) {
                let target = event.target.closest("a"); // Find closest link clicked
                if (target && target.href) {
                    event.preventDefault(); // Prevent default link behavior
                    document.getElementById("resultFrame").src = target.href; // Load link in resultFrame
                }
            });
        });
    </script>
</body>
</html>
